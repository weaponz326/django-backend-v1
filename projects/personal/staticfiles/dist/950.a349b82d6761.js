"use strict";(self.webpackChunkfrontend_v1=self.webpackChunkfrontend_v1||[]).push([[950],{9950:(vt,T,s)=>{s.r(T),s.d(T,{AccountsPageModule:()=>gt});var p=s(8583),u=s(2305),t=s(7716),N=s(2916),R=s(983);let I=(()=>{class a{constructor(){this.navLinks=[{text:"All Accounts",url:"/home/accounts/all-accounts",icon:"bi bi-list-ul"},{text:"All Transactions",url:"/home/accounts/all-transactions",icon:"bi bi-list-ul"}]}ngOnInit(){}}return a.\u0275fac=function(e){return new(e||a)},a.\u0275cmp=t.\u0275\u0275defineComponent({type:a,selectors:[["app-accounts-page"]],decls:6,vars:4,consts:[[3,"navBrand","source"],["id","wrapper"],[3,"navLinks","heading"],["id","content-wrapper",1,"d-flex","flex-column"],["id","content"]],template:function(e,n){1&e&&(t.\u0275\u0275element(0,"app-main-navbar",0),t.\u0275\u0275elementStart(1,"div",1),t.\u0275\u0275element(2,"app-module-sidenav",2),t.\u0275\u0275elementStart(3,"div",3),t.\u0275\u0275elementStart(4,"div",4),t.\u0275\u0275element(5,"router-outlet"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd()),2&e&&(t.\u0275\u0275property("navBrand","nR Personal")("source","Personal"),t.\u0275\u0275advance(2),t.\u0275\u0275property("navLinks",n.navLinks)("heading","Accounts"))},directives:[N.D,R.m,u.lC],styles:[""]}),a})();var i=s(3679),l=s(8529),h=s(5301);const x=["buttonElementReference"],Q=["connectionToastComponentReference"];let E=(()=>{class a{constructor(e,n){this.router=e,this.accountsApi=n,this.accountForm=new i.cw({})}ngOnInit(){this.initAccountForm()}openModal(){this.accountForm.controls.accountType.setValue("Savings"),this.buttonElement.nativeElement.click()}initAccountForm(){this.accountForm=new i.cw({accountName:new i.NI(""),accountNumber:new i.NI(""),bankName:new i.NI(""),accountType:new i.NI("")})}postAccount(){let e={user:localStorage.getItem("personal_id"),account_name:this.accountForm.controls.accountName.value,account_number:this.accountForm.controls.accountNumber.value,bank_name:this.accountForm.controls.bankName.value,account_type:this.accountForm.controls.accountType.value};console.log(e),this.accountsApi.postAccount(e).subscribe(n=>{console.log(n),n.id&&(sessionStorage.setItem("personal_account_id",n.id),this.router.navigateByUrl("/home/accounts/view-account"))},n=>{console.log(n),this.connectionToast.openToast()})}}return a.\u0275fac=function(e){return new(e||a)(t.\u0275\u0275directiveInject(u.F0),t.\u0275\u0275directiveInject(h.H))},a.\u0275cmp=t.\u0275\u0275defineComponent({type:a,selectors:[["app-add-account"]],viewQuery:function(e,n){if(1&e&&(t.\u0275\u0275viewQuery(x,5,t.ElementRef),t.\u0275\u0275viewQuery(Q,5,l.Y)),2&e){let o;t.\u0275\u0275queryRefresh(o=t.\u0275\u0275loadQuery())&&(n.buttonElement=o.first),t.\u0275\u0275queryRefresh(o=t.\u0275\u0275loadQuery())&&(n.connectionToast=o.first)}},decls:47,vars:2,consts:[["data-bs-toggle","modal","data-bs-target","#newAccountModal",3,"hidden"],["buttonElementReference",""],["id","newAccountModal","tabindex","-1","aria-labelledby","newAccountModalLabel","aria-hidden","true",1,"modal","fade","form-modal"],[1,"modal-dialog"],[1,"modal-content"],[1,"page-form",3,"formGroup","ngSubmit"],[1,"modal-header","bg-light"],["id","newAccountModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[1,"row","mb-1"],[1,"col-md-4"],[1,"float-end","mt-1"],[1,"col-md-8"],["formControlName","accountName",1,"form-control","form-control-sm","w-100"],["formControlName","accountNumber",1,"form-control","form-control-sm","w-100"],["formControlName","bankName",1,"form-control","form-control-sm","w-100"],["formControlName","accountType",1,"form-control","form-control-sm","w-100"],[1,"modal-footer"],["type","submit","data-bs-dismiss","modal",1,"btn","btn-sm","btn-secondary","modal-form-btn"],["type","button","data-bs-dismiss","modal",1,"btn","btn-sm","btn-secondary","modal-form-btn"],["connectionToastComponentReference",""]],template:function(e,n){1&e&&(t.\u0275\u0275elementStart(0,"button",0,1),t.\u0275\u0275text(2," Launch demo modal\n"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(3,"div",2),t.\u0275\u0275elementStart(4,"div",3),t.\u0275\u0275elementStart(5,"div",4),t.\u0275\u0275elementStart(6,"form",5),t.\u0275\u0275listener("ngSubmit",function(){return n.postAccount()}),t.\u0275\u0275elementStart(7,"div",6),t.\u0275\u0275elementStart(8,"span",7),t.\u0275\u0275text(9,"Add New Account"),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(10,"button",8),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(11,"div",9),t.\u0275\u0275elementStart(12,"div",10),t.\u0275\u0275elementStart(13,"div",11),t.\u0275\u0275elementStart(14,"label",12),t.\u0275\u0275text(15,"Account Name :"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(16,"div",13),t.\u0275\u0275element(17,"input",14),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(18,"div",10),t.\u0275\u0275elementStart(19,"div",11),t.\u0275\u0275elementStart(20,"label",12),t.\u0275\u0275text(21,"Account Number :"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(22,"div",13),t.\u0275\u0275element(23,"input",15),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(24,"div",10),t.\u0275\u0275elementStart(25,"div",11),t.\u0275\u0275elementStart(26,"label",12),t.\u0275\u0275text(27,"Bank Name :"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(28,"div",13),t.\u0275\u0275element(29,"input",16),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(30,"div",10),t.\u0275\u0275elementStart(31,"div",11),t.\u0275\u0275elementStart(32,"label",12),t.\u0275\u0275text(33,"Account Type :"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(34,"div",13),t.\u0275\u0275elementStart(35,"select",17),t.\u0275\u0275elementStart(36,"option"),t.\u0275\u0275text(37,"Current"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(38,"option"),t.\u0275\u0275text(39,"Savings"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(40,"div",18),t.\u0275\u0275elementStart(41,"button",19),t.\u0275\u0275text(42,"Save"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(43,"button",20),t.\u0275\u0275text(44,"Cancel"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(45,"app-connection-toast",null,21)),2&e&&(t.\u0275\u0275property("hidden",!0),t.\u0275\u0275advance(6),t.\u0275\u0275property("formGroup",n.accountForm))},directives:[i._Y,i.JL,i.sg,i.Fj,i.JJ,i.u,i.EJ,i.YN,i.Kr,l.Y],styles:[""]}),a})();var f=s(3203),d=s(4289),P=s(490);let _=(()=>{class a{constructor(e,n){this.pdfPrint=e,this.accountsApi=n,this.accountsGridData=[],this.transactionsGridData=[],this.allTransactionsGridData=[]}getPrintAccounts(e){this.accountsApi.getAccounts(1,e,"").subscribe(n=>{console.log(n),this.accountsGridData=n.results,this.printAllAccounts()},n=>{console.log(n)})}printAllAccounts(){let e=this.accountsGridData.map(function(r){return{account_name:r.account_name,account_number:r.account_number,bank_name:r.bank_name}});var n=[["Account Name","Account Number","Bank Name"]];e.forEach(r=>{var m=[];for(let b in r)m.push(r[b]);n.push(m)}),this.pdfPrint.openPdf([{layout:"lightHorizontalLines",table:{headerRows:1,widths:["45%","25%","30%"],body:n}}])}getPrintAccount(){this.accountsApi.getSingleAccount().subscribe(e=>{console.log(e),this.accountFormData=e,this.getPrintTransactions()},e=>{console.log(e)})}getPrintTransactions(){this.accountsApi.getTransactions().subscribe(e=>{console.log(e),this.transactionsGridData=e,this.printViewAccount()},e=>{console.log(e)})}printViewAccount(){let e=this.transactionsGridData.map(function(r){return{transaction_date:new Date(r.transaction_date).toISOString().slice(0,16),description:r.description,transaction_type:r.transaction_type,amount:r.amount}});var n=[["Transaction Date","Description","Transaction Type","Amount"]];e.forEach(r=>{var m=[];for(let b in r)m.push(r[b]);n.push(m)}),this.pdfPrint.openPdf([{columns:[[{text:"Account Name: "+this.accountFormData.account_name},{text:"Account No: "+this.accountFormData.account_number},{text:"Bank Name: "+this.accountFormData.bank_name},{text:"Account Type: "+this.accountFormData.account_type}],[{text:"Account Balance",bold:!0,alignment:"center"},{text:"$",bold:!0,alignment:"center"}]]},{text:"Transactions",bold:!0,margin:[0,20,0,10]},{layout:"lightHorizontalLines",table:{headerRows:1,widths:["25%","35%","20%","20%"],body:n}}])}getPrintAllTransactions(e){this.accountsApi.getAllTransactions(1,e,"").subscribe(n=>{console.log(n),this.allTransactionsGridData=n.results,this.printAllTransactions()},n=>{console.log(n)})}printAllTransactions(){let e=this.allTransactionsGridData.map(function(r){return{transaction_date:new Date(r.transaction_date).toISOString().slice(0,16),account_name:r.account.account_name,bank_name:r.account.bank_name,description:r.description,transaction_type:r.transaction_type,amount:r.amount}});var n=[["Transaction Date","Account Name","Bank Name","Description","Transaction Type","Amount"]];e.forEach(r=>{var m=[];for(let b in r)m.push(r[b]);n.push(m)}),this.pdfPrint.openPdf([{layout:"lightHorizontalLines",table:{headerRows:1,widths:["15%","20%","18%","23%","12%","12%"],body:n}}])}}return a.\u0275fac=function(e){return new(e||a)(t.\u0275\u0275inject(P.n),t.\u0275\u0275inject(h.H))},a.\u0275prov=t.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();var g=s(4345);const k=["connectionToastComponentReference"],V=["addAccountComponentReference"],M=["tablePaginationComponentReference"],G=["accountNameSortingComponentReference"],L=["accountNumberSortingComponentReference"],B=["bankNameSortingComponentReference"];function H(a,c){if(1&a){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"tr",22),t.\u0275\u0275listener("dblclick",function(){const r=t.\u0275\u0275restoreView(e).$implicit;return t.\u0275\u0275nextContext().viewAccount(r.id)}),t.\u0275\u0275elementStart(1,"td"),t.\u0275\u0275text(2),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(3,"td"),t.\u0275\u0275text(4),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(5,"td"),t.\u0275\u0275text(6),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd()}if(2&a){const e=c.$implicit;t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(null==e?null:e.account_name),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(null==e?null:e.account_number),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(null==e?null:e.bank_name)}}let O=(()=>{class a{constructor(e,n,o){this.router=e,this.accountsApi=n,this.accountsPrint=o,this.navHeading=[{text:"All Accounts",url:"/home/accounts/all-accounts"}],this.accountsGridData=[],this.currentPage=0,this.totalPages=0,this.totalItems=0}ngOnInit(){}ngAfterViewInit(){this.getAccounts(1,20,"")}getAccounts(e,n,o){this.accountsApi.getAccounts(e,n,o).subscribe(r=>{console.log(r),this.accountsGridData=r.results,this.currentPage=r.current_page,this.totalPages=r.total_pages,this.totalItems=r.count},r=>{console.log(r),this.connectionToast.openToast()})}viewAccount(e){console.log(e),sessionStorage.setItem("personal_account_id",e),this.router.navigateByUrl("/home/accounts/view-account")}sortTable(e){console.log(e),this.getAccounts(1,20,e),"account_name"==e||"-account_name"==e?(this.accountNumberSorting.resetSort(),this.bankNameSorting.resetSort()):"account_number"==e||"-account_number"==e?(this.accountNameSorting.resetSort(),this.bankNameSorting.resetSort()):("bank_name"==e||"-bank_name"==e)&&(this.accountNameSorting.resetSort(),this.accountNumberSorting.resetSort())}onPrint(){console.log("lets start printing..."),this.accountsPrint.getPrintAccounts(this.totalItems)}}return a.\u0275fac=function(e){return new(e||a)(t.\u0275\u0275directiveInject(u.F0),t.\u0275\u0275directiveInject(h.H),t.\u0275\u0275directiveInject(_))},a.\u0275cmp=t.\u0275\u0275defineComponent({type:a,selectors:[["app-all-accounts"]],viewQuery:function(e,n){if(1&e&&(t.\u0275\u0275viewQuery(k,5,l.Y),t.\u0275\u0275viewQuery(V,5,E),t.\u0275\u0275viewQuery(M,5,f.Q),t.\u0275\u0275viewQuery(G,5,d.m),t.\u0275\u0275viewQuery(L,5,d.m),t.\u0275\u0275viewQuery(B,5,d.m)),2&e){let o;t.\u0275\u0275queryRefresh(o=t.\u0275\u0275loadQuery())&&(n.connectionToast=o.first),t.\u0275\u0275queryRefresh(o=t.\u0275\u0275loadQuery())&&(n.addAccount=o.first),t.\u0275\u0275queryRefresh(o=t.\u0275\u0275loadQuery())&&(n.tablePagination=o.first),t.\u0275\u0275queryRefresh(o=t.\u0275\u0275loadQuery())&&(n.accountNameSorting=o.first),t.\u0275\u0275queryRefresh(o=t.\u0275\u0275loadQuery())&&(n.accountNumberSorting=o.first),t.\u0275\u0275queryRefresh(o=t.\u0275\u0275loadQuery())&&(n.bankNameSorting=o.first)}},decls:34,vars:8,consts:[[3,"headings","showPrint","print"],[1,"container"],[1,"row","mb-3"],[1,"col-md-12"],[1,"btn","btn-secondary","page-add-btn",3,"click"],[1,"row"],[1,"col-md-9"],[1,"table","table-bordered","table-sm","w-100","page-table"],[1,"bg-light"],["width","45%"],[3,"sortField","sortDirection"],["accountNameSortingComponentReference",""],["width","25%"],["accountNumberSortingComponentReference",""],["width","30%"],["bankNameSortingComponentReference",""],["class","table-pointer",3,"dblclick",4,"ngFor","ngForOf"],["colspan","3"],[3,"currentPage","totalPages","pageSelected"],["tablePaginationComponentReference",""],["addAccountComponentReference",""],["connectionToastComponentReference",""],[1,"table-pointer",3,"dblclick"]],template:function(e,n){1&e&&(t.\u0275\u0275elementStart(0,"app-module-topnav",0),t.\u0275\u0275listener("print",function(){return n.onPrint()}),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(1,"div",1),t.\u0275\u0275elementStart(2,"div",2),t.\u0275\u0275elementStart(3,"div",3),t.\u0275\u0275elementStart(4,"button",4),t.\u0275\u0275listener("click",function(){return n.addAccount.openModal()}),t.\u0275\u0275text(5,"New Account"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(6,"div",5),t.\u0275\u0275elementStart(7,"div",6),t.\u0275\u0275elementStart(8,"table",7),t.\u0275\u0275elementStart(9,"thead"),t.\u0275\u0275elementStart(10,"tr",8),t.\u0275\u0275elementStart(11,"th",9),t.\u0275\u0275text(12," Account Name "),t.\u0275\u0275elementStart(13,"app-table-sorting",10,11),t.\u0275\u0275listener("sortDirection",function(r){return n.sortTable(r)}),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(15,"th",12),t.\u0275\u0275text(16," Account No. "),t.\u0275\u0275elementStart(17,"app-table-sorting",10,13),t.\u0275\u0275listener("sortDirection",function(r){return n.sortTable(r)}),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(19,"th",14),t.\u0275\u0275text(20," Bank Name "),t.\u0275\u0275elementStart(21,"app-table-sorting",10,15),t.\u0275\u0275listener("sortDirection",function(r){return n.sortTable(r)}),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(23,"tbody"),t.\u0275\u0275template(24,H,7,3,"tr",16),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(25,"tfoot"),t.\u0275\u0275elementStart(26,"tr",8),t.\u0275\u0275elementStart(27,"td",17),t.\u0275\u0275elementStart(28,"app-table-pagination",18,19),t.\u0275\u0275listener("pageSelected",function(r){return n.getAccounts(r,20,"")}),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(30,"app-add-account",null,20),t.\u0275\u0275element(32,"app-connection-toast",null,21)),2&e&&(t.\u0275\u0275property("headings",n.navHeading)("showPrint",!0),t.\u0275\u0275advance(13),t.\u0275\u0275property("sortField","account_name"),t.\u0275\u0275advance(4),t.\u0275\u0275property("sortField","accountNumber"),t.\u0275\u0275advance(4),t.\u0275\u0275property("sortField","bank_name"),t.\u0275\u0275advance(3),t.\u0275\u0275property("ngForOf",n.accountsGridData),t.\u0275\u0275advance(4),t.\u0275\u0275property("currentPage",n.currentPage)("totalPages",n.totalPages))},directives:[g.H,d.m,p.sg,f.Q,E,l.Y],styles:[""]}),a})(),v=(()=>{class a{constructor(){this.transactionForm=new i.cw({})}ngOnInit(){this.initTransactionForm()}initTransactionForm(){this.transactionForm=new i.cw({transactionDate:new i.NI(""),description:new i.NI(""),transactionType:new i.NI(""),amount:new i.NI("")})}}return a.\u0275fac=function(e){return new(e||a)},a.\u0275cmp=t.\u0275\u0275defineComponent({type:a,selectors:[["app-transaction-form"]],decls:29,vars:1,consts:[[1,"page-form",3,"formGroup"],[1,"row","mb-1"],[1,"col-md-4"],[1,"float-end","mt-1"],[1,"col-md-8"],["type","datetime-local","formControlName","transactionDate",1,"form-control","form-control-sm","w-100"],["formControlName","description",1,"form-control","form-control-sm","w-100"],["formControlName","transactionType",1,"form-control","form-control-sm","w-100"],["type","number","formControlName","amount",1,"form-control","form-control-sm","w-100"]],template:function(e,n){1&e&&(t.\u0275\u0275elementStart(0,"form",0),t.\u0275\u0275elementStart(1,"div",1),t.\u0275\u0275elementStart(2,"div",2),t.\u0275\u0275elementStart(3,"label",3),t.\u0275\u0275text(4,"Transaction Date :"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(5,"div",4),t.\u0275\u0275element(6,"input",5),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(7,"div",1),t.\u0275\u0275elementStart(8,"div",2),t.\u0275\u0275elementStart(9,"label",3),t.\u0275\u0275text(10,"Description :"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(11,"div",4),t.\u0275\u0275element(12,"input",6),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(13,"div",1),t.\u0275\u0275elementStart(14,"div",2),t.\u0275\u0275elementStart(15,"label",3),t.\u0275\u0275text(16,"Transaction Type :"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(17,"div",4),t.\u0275\u0275elementStart(18,"select",7),t.\u0275\u0275elementStart(19,"option"),t.\u0275\u0275text(20,"Credit"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(21,"option"),t.\u0275\u0275text(22,"Debit"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(23,"div",1),t.\u0275\u0275elementStart(24,"div",2),t.\u0275\u0275elementStart(25,"label",3),t.\u0275\u0275text(26,"Amount :"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(27,"div",4),t.\u0275\u0275element(28,"input",8),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd()),2&e&&t.\u0275\u0275property("formGroup",n.transactionForm)},directives:[i._Y,i.JL,i.sg,i.Fj,i.JJ,i.u,i.EJ,i.YN,i.Kr,i.wV],styles:[""]}),a})();const j=["buttonElementReference"],Y=["transactionFormComponentReference"];let y=(()=>{class a{constructor(){this.saveTransactionEvent=new t.EventEmitter}ngOnInit(){}openModal(){this.transactionForm.transactionForm.controls.transactionDate.setValue((new Date).toISOString().slice(0,16)),this.transactionForm.transactionForm.controls.transactionType.setValue("Credit"),this.transactionForm.transactionForm.controls.amount.setValue(0),this.buttonElement.nativeElement.click()}saveTransaction(){let e={account:sessionStorage.getItem("personal_account_id"),transaction_date:this.transactionForm.transactionForm.controls.transactionDate.value,description:this.transactionForm.transactionForm.controls.description.value,transaction_type:this.transactionForm.transactionForm.controls.transactionType.value,amount:this.transactionForm.transactionForm.controls.amount.value};this.saveTransactionEvent.emit(e)}resetForm(){this.transactionForm.transactionForm.controls.transactionDate.setValue(""),this.transactionForm.transactionForm.controls.description.setValue(""),this.transactionForm.transactionForm.controls.transactionType.setValue(""),this.transactionForm.transactionForm.controls.amount.setValue("")}}return a.\u0275fac=function(e){return new(e||a)},a.\u0275cmp=t.\u0275\u0275defineComponent({type:a,selectors:[["app-add-transaction"]],viewQuery:function(e,n){if(1&e&&(t.\u0275\u0275viewQuery(j,5,t.ElementRef),t.\u0275\u0275viewQuery(Y,5,v)),2&e){let o;t.\u0275\u0275queryRefresh(o=t.\u0275\u0275loadQuery())&&(n.buttonElement=o.first),t.\u0275\u0275queryRefresh(o=t.\u0275\u0275loadQuery())&&(n.transactionForm=o.first)}},outputs:{saveTransactionEvent:"saveTransactionEvent"},decls:18,vars:1,consts:[["data-bs-toggle","modal","data-bs-target","#addTransactionModal",3,"hidden"],["buttonElementReference",""],["id","addTransactionModal","tabindex","-1","aria-labelledby","addTransactionModalLabel","aria-hidden","true",1,"modal","fade","form-modal"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header","bg-light"],["id","addTransactionModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],["transactionFormComponentReference",""],[1,"modal-footer"],["data-bs-dismiss","modal",1,"btn","btn-sm","btn-secondary","modal-form-btn",3,"click"],["data-bs-dismiss","modal",1,"btn","btn-sm","btn-secondary","modal-form-btn"]],template:function(e,n){1&e&&(t.\u0275\u0275elementStart(0,"button",0,1),t.\u0275\u0275text(2," Launch demo modal\n"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(3,"div",2),t.\u0275\u0275elementStart(4,"div",3),t.\u0275\u0275elementStart(5,"div",4),t.\u0275\u0275elementStart(6,"div",5),t.\u0275\u0275elementStart(7,"span",6),t.\u0275\u0275text(8,"Add Transaction"),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(9,"button",7),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(10,"div",8),t.\u0275\u0275element(11,"app-transaction-form",null,9),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(13,"div",10),t.\u0275\u0275elementStart(14,"button",11),t.\u0275\u0275listener("click",function(){return n.saveTransaction()}),t.\u0275\u0275text(15,"Save"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(16,"button",12),t.\u0275\u0275text(17,"Cancel"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd()),2&e&&t.\u0275\u0275property("hidden",!0)},directives:[v],styles:[""]}),a})();const z=["buttonElementReference"],J=["transactionFormComponentReference"];let A=(()=>{class a{constructor(){this.saveTransactionEvent=new t.EventEmitter,this.selectedIndex=0,this.selectedId=""}ngOnInit(){}openModal(e,n){this.selectedIndex=e,this.selectedId=n.id,this.transactionForm.transactionForm.controls.transactionDate.setValue(new Date(n.transaction_date).toISOString().slice(0,16)),this.transactionForm.transactionForm.controls.description.setValue(n.description),this.transactionForm.transactionForm.controls.transactionType.setValue(n.transaction_type),this.transactionForm.transactionForm.controls.amount.setValue(n.amount),this.buttonElement.nativeElement.click()}saveTransaction(){let e={index:this.selectedIndex,id:this.selectedId,account:sessionStorage.getItem("personal_account_id"),transaction_date:this.transactionForm.transactionForm.controls.transactionDate.value,description:this.transactionForm.transactionForm.controls.description.value,transaction_type:this.transactionForm.transactionForm.controls.transactionType.value,amount:this.transactionForm.transactionForm.controls.amount.value};this.saveTransactionEvent.emit(e)}}return a.\u0275fac=function(e){return new(e||a)},a.\u0275cmp=t.\u0275\u0275defineComponent({type:a,selectors:[["app-edit-transaction"]],viewQuery:function(e,n){if(1&e&&(t.\u0275\u0275viewQuery(z,5,t.ElementRef),t.\u0275\u0275viewQuery(J,5,v)),2&e){let o;t.\u0275\u0275queryRefresh(o=t.\u0275\u0275loadQuery())&&(n.buttonElement=o.first),t.\u0275\u0275queryRefresh(o=t.\u0275\u0275loadQuery())&&(n.transactionForm=o.first)}},outputs:{saveTransactionEvent:"saveTransactionEvent"},decls:18,vars:1,consts:[["data-bs-toggle","modal","data-bs-target","#editTransactionModal",3,"hidden"],["buttonElementReference",""],["id","editTransactionModal","tabindex","-1","aria-labelledby","editTransactionModalLabel","aria-hidden","true",1,"modal","fade","form-modal"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header","bg-light"],["id","editTransactionModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],["transactionFormComponentReference",""],[1,"modal-footer"],["data-bs-dismiss","modal",1,"btn","btn-sm","btn-secondary","modal-form-btn",3,"click"],["data-bs-dismiss","modal",1,"btn","btn-sm","btn-secondary","modal-form-btn"]],template:function(e,n){1&e&&(t.\u0275\u0275elementStart(0,"button",0,1),t.\u0275\u0275text(2," Launch demo modal\n"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(3,"div",2),t.\u0275\u0275elementStart(4,"div",3),t.\u0275\u0275elementStart(5,"div",4),t.\u0275\u0275elementStart(6,"div",5),t.\u0275\u0275elementStart(7,"span",6),t.\u0275\u0275text(8,"Add Transaction"),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(9,"button",7),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(10,"div",8),t.\u0275\u0275element(11,"app-transaction-form",null,9),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(13,"div",10),t.\u0275\u0275elementStart(14,"button",11),t.\u0275\u0275listener("click",function(){return n.saveTransaction()}),t.\u0275\u0275text(15,"Save"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(16,"button",12),t.\u0275\u0275text(17,"Cancel"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd()),2&e&&t.\u0275\u0275property("hidden",!0)},directives:[v],styles:[""]}),a})();var S=s(610);const q=["addTransactionComponentReference"],U=["editTransactionComponentReference"],$=["connectionToastComponentReference"],K=["deleteModalComponentReference"];function X(a,c){if(1&a){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"tr"),t.\u0275\u0275elementStart(1,"td"),t.\u0275\u0275text(2),t.\u0275\u0275pipe(3,"date"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(4,"td"),t.\u0275\u0275text(5),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(6,"td"),t.\u0275\u0275text(7),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(8,"td"),t.\u0275\u0275text(9),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(10,"td",21),t.\u0275\u0275elementStart(11,"button",22),t.\u0275\u0275listener("click",function(){const r=t.\u0275\u0275restoreView(e).index;return t.\u0275\u0275nextContext().openEditTransaction(r)}),t.\u0275\u0275element(12,"i",23),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(13,"button",22),t.\u0275\u0275listener("click",function(){const o=t.\u0275\u0275restoreView(e),r=o.index,m=o.$implicit;return t.\u0275\u0275nextContext().confirmDelete(r,m.id)}),t.\u0275\u0275element(14,"i",24),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd()}if(2&a){const e=c.$implicit;t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(3,4,null==e?null:e.transaction_date)),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(null==e?null:e.description),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(null==e?null:e.transaction_type),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(null==e?null:e.amount)}}let C=(()=>{class a{constructor(e){this.accountsApi=e,this.balanceEvent=new t.EventEmitter,this.transactionsGridData=[],this.deleteId="",this.deleteIndex=0}ngOnInit(){}ngAfterViewInit(){this.getTransactions()}calculateBalance(){let e=this.transactionsGridData.reduce((n,o)=>{});this.balanceEvent.emit(e),console.log(e)}getTransactions(){this.accountsApi.getTransactions().subscribe(e=>{console.log(e),this.transactionsGridData=e,this.calculateBalance()},e=>{console.log(e),this.connectionToast.openToast()})}postTransaction(e){console.log(e),this.accountsApi.postTransaction(e).subscribe(n=>{console.log(n),n.id&&(this.transactionsGridData.push(n),this.calculateBalance(),this.addTransaction.resetForm())},n=>{console.log(n),this.connectionToast.openToast()})}putTransaction(e){console.log(e),this.accountsApi.putTransaction(e.id,e).subscribe(n=>{console.log(n),n.id&&(this.transactionsGridData[e.index]=n,this.calculateBalance())},n=>{console.log(n),this.connectionToast.openToast()})}deleteTransaction(){console.log(this.deleteId),this.accountsApi.deleteTransaction(this.deleteId).subscribe(e=>{console.log(e),this.transactionsGridData.splice(this.deleteIndex,1),this.calculateBalance()},e=>{console.log(e),this.connectionToast.openToast()})}openEditTransaction(e){console.log(e),this.editTransaction.openModal(e,this.transactionsGridData[e])}confirmDelete(e,n){this.deleteIndex=e,this.deleteId=n,this.deleteModal.openModal()}}return a.\u0275fac=function(e){return new(e||a)(t.\u0275\u0275directiveInject(h.H))},a.\u0275cmp=t.\u0275\u0275defineComponent({type:a,selectors:[["app-account-transactions"]],viewQuery:function(e,n){if(1&e&&(t.\u0275\u0275viewQuery(q,5,y),t.\u0275\u0275viewQuery(U,5,A),t.\u0275\u0275viewQuery($,5,l.Y),t.\u0275\u0275viewQuery(K,5,S.z)),2&e){let o;t.\u0275\u0275queryRefresh(o=t.\u0275\u0275loadQuery())&&(n.addTransaction=o.first),t.\u0275\u0275queryRefresh(o=t.\u0275\u0275loadQuery())&&(n.editTransaction=o.first),t.\u0275\u0275queryRefresh(o=t.\u0275\u0275loadQuery())&&(n.connectionToast=o.first),t.\u0275\u0275queryRefresh(o=t.\u0275\u0275loadQuery())&&(n.deleteModal=o.first)}},outputs:{balanceEvent:"balanceEvent"},decls:30,vars:1,consts:[[1,"row"],[1,"col-md-9"],[1,"top-divider"],[1,"bottom-divider"],[1,"mb-3"],[1,"table","table-bordered","table-sm","w-100","page-table"],[1,"bg-light"],["width","20%"],["width","37%"],["width","18%"],["width","15%"],["width","10%",1,"p-0"],[1,"btn","btn-secondary","btn-sm","w-100",3,"click"],[1,"bi","bi-plus"],[4,"ngFor","ngForOf"],[3,"saveTransactionEvent"],["addTransactionComponentReference",""],["editTransactionComponentReference",""],["connectionToastComponentReference",""],[3,"confirmEvent"],["deleteModalComponentReference",""],[1,"p-0"],[1,"btn","btn-sm","border","w-50",3,"click"],[1,"bi","bi-pen"],[1,"bi","bi-trash"]],template:function(e,n){1&e&&(t.\u0275\u0275elementStart(0,"div",0),t.\u0275\u0275elementStart(1,"div",1),t.\u0275\u0275element(2,"hr",2),t.\u0275\u0275element(3,"hr",3),t.\u0275\u0275elementStart(4,"h4",4),t.\u0275\u0275text(5,"Transactions"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(6,"table",5),t.\u0275\u0275elementStart(7,"thead"),t.\u0275\u0275elementStart(8,"tr",6),t.\u0275\u0275elementStart(9,"th",7),t.\u0275\u0275text(10,"Transaction Date"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(11,"th",8),t.\u0275\u0275text(12,"Description"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(13,"th",9),t.\u0275\u0275text(14,"Transaction Type"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(15,"th",10),t.\u0275\u0275text(16,"Amount"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(17,"th",11),t.\u0275\u0275elementStart(18,"button",12),t.\u0275\u0275listener("click",function(){return n.addTransaction.openModal()}),t.\u0275\u0275element(19,"i",13),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(20,"tbody"),t.\u0275\u0275template(21,X,15,6,"tr",14),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(22,"app-add-transaction",15,16),t.\u0275\u0275listener("saveTransactionEvent",function(r){return n.postTransaction(r)}),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(24,"app-edit-transaction",15,17),t.\u0275\u0275listener("saveTransactionEvent",function(r){return n.putTransaction(r)}),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(26,"app-connection-toast",null,18),t.\u0275\u0275elementStart(28,"app-delete-modal",19,20),t.\u0275\u0275listener("confirmEvent",function(){return n.deleteTransaction()}),t.\u0275\u0275elementEnd()),2&e&&(t.\u0275\u0275advance(21),t.\u0275\u0275property("ngForOf",n.transactionsGridData))},directives:[p.sg,y,A,l.Y,S.z],pipes:[p.uU],styles:[""]}),a})();const Z=["accountTransactionsComponentReference"],W=["connectionToastComponentReference"],tt=["deleteModalComponentReference"];let et=(()=>{class a{constructor(e,n,o){this.router=e,this.accountsApi=n,this.accountsPrint=o,this.navHeading=[{text:"All Accounts",url:"/home/accounts/all-accounts"},{text:"View Account",url:"/home/accounts/view-account"}],this.accountForm=new i.cw({}),this.balance=0,this.accountFormData={},this.transactionsGridData=[],this.isAccountSaving=!1}ngOnInit(){this.initAccountForm()}ngAfterViewInit(){this.getAccount()}initAccountForm(){this.accountForm=new i.cw({accountName:new i.NI(""),accountNumber:new i.NI(""),bankName:new i.NI(""),accountType:new i.NI("")})}getAccount(){this.accountsApi.getSingleAccount().subscribe(e=>{console.log(e),this.accountForm.controls.accountName.setValue(e.account_name),this.accountForm.controls.accountNumber.setValue(e.account_number),this.accountForm.controls.bankName.setValue(e.bank_name),this.accountForm.controls.accountType.setValue(e.account_type)},e=>{console.log(e),this.connectionToast.openToast()})}putAccount(){let e={user:localStorage.getItem("personal_id"),account_name:this.accountForm.controls.accountName.value,account_number:this.accountForm.controls.accountNumber.value,bank_name:this.accountForm.controls.bankName.value,account_type:this.accountForm.controls.accountType.value};console.log(e),this.isAccountSaving=!0,this.accountsApi.putAccount(e).subscribe(n=>{console.log(n),this.isAccountSaving=!1},n=>{console.log(n),this.connectionToast.openToast(),this.isAccountSaving=!1})}deleteAccount(){this.accountsApi.deleteAccount().subscribe(e=>{console.log(e),this.router.navigateByUrl("/home/accounts/all-accounts")},e=>{console.log(e),this.connectionToast.openToast()})}confirmDelete(){this.deleteModal.openModal()}onPrint(){console.log("lets start printing..."),this.accountsPrint.getPrintAccount()}}return a.\u0275fac=function(e){return new(e||a)(t.\u0275\u0275directiveInject(u.F0),t.\u0275\u0275directiveInject(h.H),t.\u0275\u0275directiveInject(_))},a.\u0275cmp=t.\u0275\u0275defineComponent({type:a,selectors:[["app-view-account"]],viewQuery:function(e,n){if(1&e&&(t.\u0275\u0275viewQuery(Z,5,C),t.\u0275\u0275viewQuery(W,5,l.Y),t.\u0275\u0275viewQuery(tt,5,S.z)),2&e){let o;t.\u0275\u0275queryRefresh(o=t.\u0275\u0275loadQuery())&&(n.accountTransactions=o.first),t.\u0275\u0275queryRefresh(o=t.\u0275\u0275loadQuery())&&(n.connectionToast=o.first),t.\u0275\u0275queryRefresh(o=t.\u0275\u0275loadQuery())&&(n.deleteModal=o.first)}},decls:55,vars:5,consts:[[3,"headings","showPrint","print"],[1,"container"],[1,"row","page-form"],[1,"col-md-6"],[1,"page-form",3,"formGroup","ngSubmit"],[1,"mb-3"],[1,"row","mb-1"],[1,"col-md-4"],[1,"float-end","mt-1"],[1,"col-md-8"],["formControlName","accountName",1,"form-control","form-control-sm","w-100"],["formControlName","accountNumber",1,"form-control","form-control-sm","w-100"],["formControlName","bankName",1,"form-control","form-control-sm","w-100"],[1,"float-end"],["formControlName","accountType",1,"form-control","form-control-sm","w-100"],[1,"row"],[1,"col-md-12"],["type","button","routerLink","/home/accounts/all-accounts",1,"btn","btn-secondary","btn-sm","float-end","ms-1","page-form-btn"],["type","button",1,"btn","btn-secondary","btn-sm","float-end","ms-1","page-form-btn",3,"click"],["type","submit",1,"btn","btn-secondary","btn-sm","float-end","ms-1","page-form-btn",3,"disabled"],[1,"col-md-6","text-center"],[1,"h1"],[3,"balanceEvent"],["accountTransactionsComponentReference",""],["connectionToastComponentReference",""],[3,"confirmEvent"],["deleteModalComponentReference",""]],template:function(e,n){1&e&&(t.\u0275\u0275elementStart(0,"app-module-topnav",0),t.\u0275\u0275listener("print",function(){return n.onPrint()}),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(1,"div",1),t.\u0275\u0275elementStart(2,"div",2),t.\u0275\u0275elementStart(3,"div",3),t.\u0275\u0275elementStart(4,"form",4),t.\u0275\u0275listener("ngSubmit",function(){return n.putAccount()}),t.\u0275\u0275elementStart(5,"h4",5),t.\u0275\u0275text(6,"Account Details"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(7,"div",6),t.\u0275\u0275elementStart(8,"div",7),t.\u0275\u0275elementStart(9,"label",8),t.\u0275\u0275text(10,"Account Name :"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(11,"div",9),t.\u0275\u0275element(12,"input",10),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(13,"div",6),t.\u0275\u0275elementStart(14,"div",7),t.\u0275\u0275elementStart(15,"label",8),t.\u0275\u0275text(16,"Account Number :"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(17,"div",9),t.\u0275\u0275element(18,"input",11),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(19,"div",6),t.\u0275\u0275elementStart(20,"div",7),t.\u0275\u0275elementStart(21,"label",8),t.\u0275\u0275text(22,"Bank Name :"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(23,"div",9),t.\u0275\u0275element(24,"input",12),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(25,"div",6),t.\u0275\u0275elementStart(26,"div",7),t.\u0275\u0275elementStart(27,"label",13),t.\u0275\u0275text(28,"Account Type :"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(29,"div",9),t.\u0275\u0275elementStart(30,"select",14),t.\u0275\u0275elementStart(31,"option"),t.\u0275\u0275text(32,"Current"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(33,"option"),t.\u0275\u0275text(34,"Savings"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(35,"hr"),t.\u0275\u0275elementStart(36,"div",15),t.\u0275\u0275elementStart(37,"div",16),t.\u0275\u0275elementStart(38,"button",17),t.\u0275\u0275text(39,"Cancel"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(40,"button",18),t.\u0275\u0275listener("click",function(){return n.confirmDelete()}),t.\u0275\u0275text(41,"Delete"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(42,"button",19),t.\u0275\u0275text(43,"Save"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(44,"div",20),t.\u0275\u0275elementStart(45,"h4"),t.\u0275\u0275text(46,"Account Balance:"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(47,"p",21),t.\u0275\u0275text(48),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(49,"app-account-transactions",22,23),t.\u0275\u0275listener("balanceEvent",function(r){return n.balance=r}),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(51,"app-connection-toast",null,24),t.\u0275\u0275elementStart(53,"app-delete-modal",25,26),t.\u0275\u0275listener("confirmEvent",function(){return n.deleteAccount()}),t.\u0275\u0275elementEnd()),2&e&&(t.\u0275\u0275property("headings",n.navHeading)("showPrint",!0),t.\u0275\u0275advance(4),t.\u0275\u0275property("formGroup",n.accountForm),t.\u0275\u0275advance(38),t.\u0275\u0275property("disabled",n.isAccountSaving),t.\u0275\u0275advance(6),t.\u0275\u0275textInterpolate1("$ ",n.balance,""))},directives:[g.H,i._Y,i.JL,i.sg,i.Fj,i.JJ,i.u,i.EJ,i.YN,i.Kr,u.rH,C,l.Y,S.z],styles:[""]}),a})();const nt=["connectionToastComponentReference"],ot=["tablePaginationComponentReference"],at=["transactionDateSortingComponentReference"],rt=["accountNameSortingComponentReference"],ct=["bankNameSortingComponentReference"],it=["descriptionSortingComponentReference"],st=["transactionTypeSortingComponentReference"],lt=["amountSortingComponentReference"];function mt(a,c){if(1&a&&(t.\u0275\u0275elementStart(0,"tr"),t.\u0275\u0275elementStart(1,"td"),t.\u0275\u0275text(2),t.\u0275\u0275pipe(3,"date"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(4,"td"),t.\u0275\u0275text(5),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(6,"td"),t.\u0275\u0275text(7),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(8,"td"),t.\u0275\u0275text(9),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(10,"td"),t.\u0275\u0275text(11),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(12,"td"),t.\u0275\u0275text(13),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd()),2&a){const e=c.$implicit;t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(3,6,null==e?null:e.transaction_date)),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(null==e?null:e.account.account_name),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(null==e?null:e.account.bank_name),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(null==e?null:e.description),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(null==e?null:e.transaction_type),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(null==e?null:e.amount)}}let dt=(()=>{class a{constructor(e,n){this.accountsApi=e,this.accountsPrint=n,this.navHeading=[{text:"All Transactions",url:"/home/accounts/all-transactions"}],this.allTransactionsGridData=[],this.currentPage=0,this.totalPages=0,this.totalItems=0}ngOnInit(){}ngAfterViewInit(){this.getAllTransactions(1,20,"")}getAllTransactions(e,n,o){this.accountsApi.getAllTransactions(e,n,o).subscribe(r=>{console.log(r),this.allTransactionsGridData=r.results,this.currentPage=r.current_page,this.totalPages=r.total_pages,this.totalItems=r.count},r=>{console.log(r),this.connectionToast.openToast()})}sortTable(e){console.log(e),this.getAllTransactions(1,20,e),"transaction_date"==e||"-transaction_date"==e?(this.accountNameSorting.resetSort(),this.bankNameSorting.resetSort(),this.descriptionSorting.resetSort(),this.transactionTypeSorting.resetSort(),this.amountSorting.resetSort()):"account_name"==e||"-account_name"==e?(this.transactionDateSorting.resetSort(),this.bankNameSorting.resetSort(),this.descriptionSorting.resetSort(),this.transactionTypeSorting.resetSort(),this.amountSorting.resetSort()):"bank_name"==e||"-bank_name"==e?(this.transactionDateSorting.resetSort(),this.accountNameSorting.resetSort(),this.descriptionSorting.resetSort(),this.transactionTypeSorting.resetSort(),this.amountSorting.resetSort()):"description"==e||"-description"==e?(this.transactionDateSorting.resetSort(),this.accountNameSorting.resetSort(),this.bankNameSorting.resetSort(),this.transactionTypeSorting.resetSort(),this.amountSorting.resetSort()):"transaction_type"==e||"-transaction_type"==e?(this.transactionDateSorting.resetSort(),this.accountNameSorting.resetSort(),this.bankNameSorting.resetSort(),this.descriptionSorting.resetSort(),this.amountSorting.resetSort()):("amount"==e||"-amount"==e)&&(this.transactionDateSorting.resetSort(),this.accountNameSorting.resetSort(),this.bankNameSorting.resetSort(),this.descriptionSorting.resetSort(),this.transactionTypeSorting.resetSort())}onPrint(){console.log("lets start printing..."),this.accountsPrint.getPrintAllTransactions(this.totalItems)}}return a.\u0275fac=function(e){return new(e||a)(t.\u0275\u0275directiveInject(h.H),t.\u0275\u0275directiveInject(_))},a.\u0275cmp=t.\u0275\u0275defineComponent({type:a,selectors:[["app-all-transactions"]],viewQuery:function(e,n){if(1&e&&(t.\u0275\u0275viewQuery(nt,5,l.Y),t.\u0275\u0275viewQuery(ot,5,f.Q),t.\u0275\u0275viewQuery(at,5,d.m),t.\u0275\u0275viewQuery(rt,5,d.m),t.\u0275\u0275viewQuery(ct,5,d.m),t.\u0275\u0275viewQuery(it,5,d.m),t.\u0275\u0275viewQuery(st,5,d.m),t.\u0275\u0275viewQuery(lt,5,d.m)),2&e){let o;t.\u0275\u0275queryRefresh(o=t.\u0275\u0275loadQuery())&&(n.connectionToast=o.first),t.\u0275\u0275queryRefresh(o=t.\u0275\u0275loadQuery())&&(n.tablePagination=o.first),t.\u0275\u0275queryRefresh(o=t.\u0275\u0275loadQuery())&&(n.transactionDateSorting=o.first),t.\u0275\u0275queryRefresh(o=t.\u0275\u0275loadQuery())&&(n.accountNameSorting=o.first),t.\u0275\u0275queryRefresh(o=t.\u0275\u0275loadQuery())&&(n.bankNameSorting=o.first),t.\u0275\u0275queryRefresh(o=t.\u0275\u0275loadQuery())&&(n.descriptionSorting=o.first),t.\u0275\u0275queryRefresh(o=t.\u0275\u0275loadQuery())&&(n.transactionTypeSorting=o.first),t.\u0275\u0275queryRefresh(o=t.\u0275\u0275loadQuery())&&(n.amountSorting=o.first)}},decls:40,vars:11,consts:[[3,"headings","showPrint","print"],[1,"container"],[1,"row"],[1,"col-md-12"],[1,"table","table-bordered","table-sm","w-100","page-table"],[1,"bg-light"],["width","15%"],[3,"sortField","sortDirection"],["transactionDateSortingComponentReference",""],["width","20%"],["accountNameSortingComponentReference",""],["width","18%"],["bankNameSortingComponentReference",""],["descriptionSortingComponentReference",""],["transactionTypeSortingComponentReference",""],["width","12%"],["amountSortingComponentReference",""],[4,"ngFor","ngForOf"],["colspan","6"],[3,"currentPage","totalPages","pageSelected"],["tablePaginationComponentReference",""],["connectionToastComponentReference",""]],template:function(e,n){1&e&&(t.\u0275\u0275elementStart(0,"app-module-topnav",0),t.\u0275\u0275listener("print",function(){return n.onPrint()}),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(1,"div",1),t.\u0275\u0275elementStart(2,"div",2),t.\u0275\u0275elementStart(3,"div",3),t.\u0275\u0275elementStart(4,"table",4),t.\u0275\u0275elementStart(5,"thead"),t.\u0275\u0275elementStart(6,"tr",5),t.\u0275\u0275elementStart(7,"th",6),t.\u0275\u0275text(8," Transaction Date "),t.\u0275\u0275elementStart(9,"app-table-sorting",7,8),t.\u0275\u0275listener("sortDirection",function(r){return n.sortTable(r)}),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(11,"th",9),t.\u0275\u0275text(12," Account Name "),t.\u0275\u0275elementStart(13,"app-table-sorting",7,10),t.\u0275\u0275listener("sortDirection",function(r){return n.sortTable(r)}),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(15,"th",11),t.\u0275\u0275text(16," Bank "),t.\u0275\u0275elementStart(17,"app-table-sorting",7,12),t.\u0275\u0275listener("sortDirection",function(r){return n.sortTable(r)}),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(19,"th",9),t.\u0275\u0275text(20," Description "),t.\u0275\u0275elementStart(21,"app-table-sorting",7,13),t.\u0275\u0275listener("sortDirection",function(r){return n.sortTable(r)}),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(23,"th",6),t.\u0275\u0275text(24," Transaction Type "),t.\u0275\u0275elementStart(25,"app-table-sorting",7,14),t.\u0275\u0275listener("sortDirection",function(r){return n.sortTable(r)}),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(27,"th",15),t.\u0275\u0275text(28," Amount "),t.\u0275\u0275elementStart(29,"app-table-sorting",7,16),t.\u0275\u0275listener("sortDirection",function(r){return n.sortTable(r)}),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(31,"tbody"),t.\u0275\u0275template(32,mt,14,8,"tr",17),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(33,"tfoot"),t.\u0275\u0275elementStart(34,"tr",5),t.\u0275\u0275elementStart(35,"td",18),t.\u0275\u0275elementStart(36,"app-table-pagination",19,20),t.\u0275\u0275listener("pageSelected",function(r){return n.getAllTransactions(r,20,"")}),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(38,"app-connection-toast",null,21)),2&e&&(t.\u0275\u0275property("headings",n.navHeading)("showPrint",!0),t.\u0275\u0275advance(9),t.\u0275\u0275property("sortField","transaction_date"),t.\u0275\u0275advance(4),t.\u0275\u0275property("sortField","account_name"),t.\u0275\u0275advance(4),t.\u0275\u0275property("sortField","bank_name"),t.\u0275\u0275advance(4),t.\u0275\u0275property("sortField","description"),t.\u0275\u0275advance(4),t.\u0275\u0275property("sortField","transactiona_type"),t.\u0275\u0275advance(4),t.\u0275\u0275property("sortField","amount"),t.\u0275\u0275advance(3),t.\u0275\u0275property("ngForOf",n.allTransactionsGridData),t.\u0275\u0275advance(4),t.\u0275\u0275property("currentPage",n.currentPage)("totalPages",n.totalPages))},directives:[g.H,d.m,p.sg,f.Q,l.Y],pipes:[p.uU],styles:[""]}),a})();var w=s(6178);const ut=["connectionToastComponentReference"];let F=(()=>{class a{constructor(e){this.accountsApi=e,this.navHeading=[{text:"Dashboard",url:"/home/accounts/dashboard"}],this.allAccountsCount=0,this.allTransactionsCount=0,this.transactionsLineChartData=[{data:[0],label:"Transactions"}],this.transactionsLineChartLabels=[""],this.chartOptions={responsive:!0,scales:{yAxes:[{beginAtZero:!0,min:0,ticks:{stepSize:1}}]}}}ngOnInit(){}ngAfterViewInit(){this.getAccountsCount(),this.getTransactionsCount(),this.getTransactionAnnotation()}getAccountsCount(){this.accountsApi.getCounts("Account").subscribe(e=>{console.log(e),this.allAccountsCount=e},e=>{console.log(e),this.connectionToast.openToast()})}getTransactionsCount(){this.accountsApi.getCounts("Transaction").subscribe(e=>{console.log(e),this.allTransactionsCount=e},e=>{console.log(e),this.connectionToast.openToast()})}getTransactionAnnotation(){this.accountsApi.getAnnotation("Transaction").subscribe(e=>{console.log(e),this.setTransactionChartData(e)},e=>{console.log(e),this.connectionToast.openToast()})}setTransactionChartData(e){this.transactionsLineChartLabels=[];for(let o=0;o<e.length;o++)this.transactionsLineChartLabels.push(e[o].date);console.log(this.transactionsLineChartLabels);let n=[];for(let o=0;o<e.length;o++)n.push(e[o].count);console.log(n),this.transactionsLineChartData=[{data:n,label:"Transactions"}]}}return a.\u0275fac=function(e){return new(e||a)(t.\u0275\u0275directiveInject(h.H))},a.\u0275cmp=t.\u0275\u0275defineComponent({type:a,selectors:[["app-dashboard"]],viewQuery:function(e,n){if(1&e&&t.\u0275\u0275viewQuery(ut,5,l.Y),2&e){let o;t.\u0275\u0275queryRefresh(o=t.\u0275\u0275loadQuery())&&(n.connectionToast=o.first)}},decls:32,vars:8,consts:[[3,"headings"],[1,"container"],[1,"row"],[1,"col-md-3","mb-4"],[1,"card","border-left-secondary","shadow","h-100","py-2"],[1,"card-body"],[1,"row","no-gutters","align-items-center"],[1,"col","mr-2"],[1,"text-xs","font-weight-bold","text-uppercase","mb-1"],[1,"h5","mb-0","font-weight-bold","text-gray-800"],[1,"col-md-8"],[1,"card","shadow","mb-4"],[1,"card-header","py-3","d-flex","flex-row","align-items-center","justify-content-between"],[1,"m-0","font-weight-bold"],[1,"chart-area"],["baseChart","",3,"datasets","labels","options","legend","chartType"],["connectionToastComponentReference",""]],template:function(e,n){1&e&&(t.\u0275\u0275element(0,"app-module-topnav",0),t.\u0275\u0275elementStart(1,"div",1),t.\u0275\u0275elementStart(2,"div",2),t.\u0275\u0275elementStart(3,"div",3),t.\u0275\u0275elementStart(4,"div",4),t.\u0275\u0275elementStart(5,"div",5),t.\u0275\u0275elementStart(6,"div",6),t.\u0275\u0275elementStart(7,"div",7),t.\u0275\u0275elementStart(8,"div",8),t.\u0275\u0275text(9,"All Accounts"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(10,"div",9),t.\u0275\u0275text(11),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(12,"div",3),t.\u0275\u0275elementStart(13,"div",4),t.\u0275\u0275elementStart(14,"div",5),t.\u0275\u0275elementStart(15,"div",6),t.\u0275\u0275elementStart(16,"div",7),t.\u0275\u0275elementStart(17,"div",8),t.\u0275\u0275text(18,"All Transactions"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(19,"div",9),t.\u0275\u0275text(20),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(21,"div",2),t.\u0275\u0275elementStart(22,"div",10),t.\u0275\u0275elementStart(23,"div",11),t.\u0275\u0275elementStart(24,"div",12),t.\u0275\u0275elementStart(25,"h6",13),t.\u0275\u0275text(26,"Total Transactions by Day"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(27,"div",5),t.\u0275\u0275elementStart(28,"div",14),t.\u0275\u0275element(29,"canvas",15),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(30,"app-connection-toast",null,16)),2&e&&(t.\u0275\u0275property("headings",n.navHeading),t.\u0275\u0275advance(11),t.\u0275\u0275textInterpolate(n.allAccountsCount),t.\u0275\u0275advance(9),t.\u0275\u0275textInterpolate(n.allTransactionsCount),t.\u0275\u0275advance(9),t.\u0275\u0275property("datasets",n.transactionsLineChartData)("labels",n.transactionsLineChartLabels)("options",n.chartOptions)("legend",!0)("chartType","line"))},directives:[g.H,w.jh,l.Y],styles:[""]}),a})();const pt=[{path:"",component:I,children:[{path:"",component:F},{path:"dashboard",component:F},{path:"all-accounts",component:O},{path:"view-account",component:et,canActivate:[(()=>{class a{constructor(e){this.router=e}canActivate(e){return!!sessionStorage.getItem("personal_account_id")||(this.router.navigateByUrl("/home/accounts"),!1)}}return a.\u0275fac=function(e){return new(e||a)(t.\u0275\u0275inject(u.F0))},a.\u0275prov=t.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac,providedIn:"root"}),a})()]},{path:"all-transactions",component:dt}]}];let ht=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.\u0275\u0275defineNgModule({type:a}),a.\u0275inj=t.\u0275\u0275defineInjector({imports:[[u.Bz.forChild(pt)],u.Bz]}),a})();var bt=s(6305),D=s(2743);let ft=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.\u0275\u0275defineNgModule({type:a}),a.\u0275inj=t.\u0275\u0275defineInjector({imports:[[p.ez,u.Bz,i.u5,i.UX,w.m9,D.p]]}),a})(),gt=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.\u0275\u0275defineNgModule({type:a}),a.\u0275inj=t.\u0275\u0275defineInjector({imports:[[p.ez,ht,bt.M,D.p,ft]]}),a})()}}]);