"use strict";(self.webpackChunkfrontend_v1=self.webpackChunkfrontend_v1||[]).push([[395],{3395:(K,v,i)=>{i.r(v),i.d(v,{CalendarPageModule:()=>Z});var p=i(8583),m=i(2305),e=i(7716),E=i(2916),A=i(983);let P=(()=>{class a{constructor(){this.navLinks=[{text:"All Calendars",url:"/home/calendar/all-calendars",icon:"bi bi-list-ul"},{text:"All Schedules",url:"/home/calendar/all-schedules",icon:"bi bi-list-ul"}]}ngOnInit(){}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=e.\u0275\u0275defineComponent({type:a,selectors:[["app-calendar-page"]],decls:6,vars:4,consts:[[3,"navBrand","source"],["id","wrapper"],[3,"navLinks","heading"],["id","content-wrapper",1,"d-flex","flex-column"],["id","content"]],template:function(t,n){1&t&&(e.\u0275\u0275element(0,"app-main-navbar",0),e.\u0275\u0275elementStart(1,"div",1),e.\u0275\u0275element(2,"app-module-sidenav",2),e.\u0275\u0275elementStart(3,"div",3),e.\u0275\u0275elementStart(4,"div",4),e.\u0275\u0275element(5,"router-outlet"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()),2&t&&(e.\u0275\u0275property("navBrand","nR Personal")("source","Personal"),e.\u0275\u0275advance(2),e.\u0275\u0275property("navLinks",n.navLinks)("heading","Calendar"))},directives:[E.D,A.m,m.lC],styles:[""]}),a})();var s=i(3679),d=i(8529),u=i(8682),g=i(4345);const D=["connectionToastComponentReference"];let T=(()=>{class a{constructor(t){this.calendarApi=t,this.navHeading=[{text:"View Calendar",url:"/home/calendar/view-calendar"}],this.calendarForm=new s.cw({}),this.schedulesGridData=[],this.calendarFormData=[],this.isCalendarSaving=!1}ngOnInit(){this.initClendarForm()}ngAfterViewInit(){this.getSchedules(),this.getCalendar()}initClendarForm(){this.calendarForm=new s.cw({calendarName:new s.NI("")})}getCalendar(){this.calendarApi.getCalendar().subscribe(t=>{console.log(t),this.calendarFormData=t,this.calendarForm.controls.calendarName.setValue(t.calendar_name)},t=>{this.connectionToast.openToast(),console.log(t)})}getSchedules(){this.calendarApi.getSchedules().subscribe(t=>{console.log(t),this.schedulesGridData=t},t=>{this.connectionToast.openToast(),console.log(t)})}putCalendar(){let t={user:localStorage.getItem("personal_id"),calendar_name:this.calendarForm.controls.calendarName.value};console.log(t),this.isCalendarSaving=!0,this.calendarApi.putCalendar(t).subscribe(n=>{console.log(n),this.isCalendarSaving=!1},n=>{console.log(n),this.connectionToast.openToast(),this.isCalendarSaving=!1})}onPrint(){console.log("lets start printing...")}}return a.\u0275fac=function(t){return new(t||a)(e.\u0275\u0275directiveInject(u.q))},a.\u0275cmp=e.\u0275\u0275defineComponent({type:a,selectors:[["app-view-calendar"]],viewQuery:function(t,n){if(1&t&&e.\u0275\u0275viewQuery(D,5,d.Y),2&t){let l;e.\u0275\u0275queryRefresh(l=e.\u0275\u0275loadQuery())&&(n.connectionToast=l.first)}},decls:19,vars:4,consts:[[3,"headings","showPrint","print"],[1,"container"],[1,"row","page-form"],[1,"col-md-9"],[1,"page-form",3,"formGroup","ngSubmit"],[1,"row","mb-3"],[1,"col-md-3"],[1,"float-end","mt-1"],[1,"col-md-6"],["formControlName","calendarName",1,"form-control","form-control-sm","w-100"],["type","submit",1,"btn","btn-sm","btn-secondary","page-form-btn",3,"disabled"],[1,"row"],["connectionToastComponentReference",""]],template:function(t,n){1&t&&(e.\u0275\u0275elementStart(0,"app-module-topnav",0),e.\u0275\u0275listener("print",function(){return n.onPrint()}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(1,"div",1),e.\u0275\u0275elementStart(2,"div",2),e.\u0275\u0275elementStart(3,"div",3),e.\u0275\u0275elementStart(4,"form",4),e.\u0275\u0275listener("ngSubmit",function(){return n.putCalendar()}),e.\u0275\u0275elementStart(5,"div",5),e.\u0275\u0275elementStart(6,"div",6),e.\u0275\u0275elementStart(7,"label",7),e.\u0275\u0275text(8,"Calendar Name :"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"div",8),e.\u0275\u0275element(10,"input",9),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"div",6),e.\u0275\u0275elementStart(12,"button",10),e.\u0275\u0275text(13,"Save"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(14,"hr"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(15,"div",11),e.\u0275\u0275element(16,"div",3),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(17,"app-connection-toast",null,12)),2&t&&(e.\u0275\u0275property("headings",n.navHeading)("showPrint",!0),e.\u0275\u0275advance(4),e.\u0275\u0275property("formGroup",n.calendarForm),e.\u0275\u0275advance(8),e.\u0275\u0275property("disabled",n.isCalendarSaving))},directives:[g.H,s._Y,s.JL,s.sg,s.Fj,s.JJ,s.u,d.Y],styles:["smart-scheduler[_ngcontent-%COMP%]{height:450px}"]}),a})();var b=i(6178);const R=["connectionToastComponentReference"];let _=(()=>{class a{constructor(t){this.calendarApi=t,this.navHeading=[{text:"Dashboard",url:"/home/calendar/dashboard"}],this.allCalendarsCount=0,this.allSchedulesCount=0,this.schedulesLineChartData=[{data:[0],label:"Schedules"}],this.schedulesLineChartLabels=[""],this.chartOptions={responsive:!0,scales:{yAxes:[{beginAtZero:!0,min:0,ticks:{stepSize:1}}]}}}ngOnInit(){}ngAfterViewInit(){this.getCalendarsCount(),this.getSchedulesCount(),this.getScheduleAnnotation()}getCalendarsCount(){this.calendarApi.getCounts("Calendar").subscribe(t=>{console.log(t),this.allCalendarsCount=t},t=>{console.log(t),this.connectionToast.openToast()})}getSchedulesCount(){this.calendarApi.getCounts("Schedule").subscribe(t=>{console.log(t),this.allSchedulesCount=t},t=>{console.log(t),this.connectionToast.openToast()})}getScheduleAnnotation(){this.calendarApi.getAnnotation("Schedule").subscribe(t=>{console.log(t),this.setScheduleChartData(t)},t=>{console.log(t),this.connectionToast.openToast()})}setScheduleChartData(t){this.schedulesLineChartLabels=[];for(let l=0;l<t.length;l++)this.schedulesLineChartLabels.push(t[l].date);console.log(this.schedulesLineChartLabels);let n=[];for(let l=0;l<t.length;l++)n.push(t[l].count);console.log(n),this.schedulesLineChartData=[{data:n,label:"Schedules"}]}}return a.\u0275fac=function(t){return new(t||a)(e.\u0275\u0275directiveInject(u.q))},a.\u0275cmp=e.\u0275\u0275defineComponent({type:a,selectors:[["app-dashboard"]],viewQuery:function(t,n){if(1&t&&e.\u0275\u0275viewQuery(R,5,d.Y),2&t){let l;e.\u0275\u0275queryRefresh(l=e.\u0275\u0275loadQuery())&&(n.connectionToast=l.first)}},decls:32,vars:8,consts:[[3,"headings"],[1,"container"],[1,"row"],[1,"col-md-3","mb-4"],[1,"card","border-left-secondary","shadow","h-100","py-2"],[1,"card-body"],[1,"row","no-gutters","align-items-center"],[1,"col","mr-2"],[1,"text-xs","font-weight-bold","text-uppercase","mb-1"],[1,"h5","mb-0","font-weight-bold","text-gray-800"],[1,"col-md-8"],[1,"card","shadow","mb-4"],[1,"card-header","py-3","d-flex","flex-row","align-items-center","justify-content-between"],[1,"m-0","font-weight-bold"],[1,"chart-area"],["baseChart","",3,"datasets","labels","options","legend","chartType"],["connectionToastComponentReference",""]],template:function(t,n){1&t&&(e.\u0275\u0275element(0,"app-module-topnav",0),e.\u0275\u0275elementStart(1,"div",1),e.\u0275\u0275elementStart(2,"div",2),e.\u0275\u0275elementStart(3,"div",3),e.\u0275\u0275elementStart(4,"div",4),e.\u0275\u0275elementStart(5,"div",5),e.\u0275\u0275elementStart(6,"div",6),e.\u0275\u0275elementStart(7,"div",7),e.\u0275\u0275elementStart(8,"div",8),e.\u0275\u0275text(9,"All Calendars"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"div",9),e.\u0275\u0275text(11),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"div",3),e.\u0275\u0275elementStart(13,"div",4),e.\u0275\u0275elementStart(14,"div",5),e.\u0275\u0275elementStart(15,"div",6),e.\u0275\u0275elementStart(16,"div",7),e.\u0275\u0275elementStart(17,"div",8),e.\u0275\u0275text(18,"All Schedules"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(19,"div",9),e.\u0275\u0275text(20),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(21,"div",2),e.\u0275\u0275elementStart(22,"div",10),e.\u0275\u0275elementStart(23,"div",11),e.\u0275\u0275elementStart(24,"div",12),e.\u0275\u0275elementStart(25,"h6",13),e.\u0275\u0275text(26,"Total Schedules by Day"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(27,"div",5),e.\u0275\u0275elementStart(28,"div",14),e.\u0275\u0275element(29,"canvas",15),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(30,"app-connection-toast",null,16)),2&t&&(e.\u0275\u0275property("headings",n.navHeading),e.\u0275\u0275advance(11),e.\u0275\u0275textInterpolate(n.allCalendarsCount),e.\u0275\u0275advance(9),e.\u0275\u0275textInterpolate(n.allSchedulesCount),e.\u0275\u0275advance(9),e.\u0275\u0275property("datasets",n.schedulesLineChartData)("labels",n.schedulesLineChartLabels)("options",n.chartOptions)("legend",!0)("chartType","line"))},directives:[g.H,b.jh,d.Y],styles:[""]}),a})();const I=["buttonElementReference"],F=["connectionToastComponentReference"];let C=(()=>{class a{constructor(t,n){this.router=t,this.calendarApi=n,this.calendarForm=new s.cw({})}ngOnInit(){this.initClendarForm()}openModal(){this.buttonElement.nativeElement.click()}initClendarForm(){this.calendarForm=new s.cw({calendarName:new s.NI("")})}postCalendar(){let t={user:localStorage.getItem("personal_id"),calendar_name:this.calendarForm.controls.calendarName.value};console.log(t),this.calendarApi.postCalendar(t).subscribe(n=>{console.log(n),n.id&&(sessionStorage.setItem("personal_calendar_id",n.id),this.router.navigateByUrl("/home/calendar/view-calendar"))},n=>{this.connectionToast.openToast(),console.log(n)})}}return a.\u0275fac=function(t){return new(t||a)(e.\u0275\u0275directiveInject(m.F0),e.\u0275\u0275directiveInject(u.q))},a.\u0275cmp=e.\u0275\u0275defineComponent({type:a,selectors:[["app-new-calendar"]],viewQuery:function(t,n){if(1&t&&(e.\u0275\u0275viewQuery(I,5,e.ElementRef),e.\u0275\u0275viewQuery(F,5,d.Y)),2&t){let l;e.\u0275\u0275queryRefresh(l=e.\u0275\u0275loadQuery())&&(n.buttonElement=l.first),e.\u0275\u0275queryRefresh(l=e.\u0275\u0275loadQuery())&&(n.connectionToast=l.first)}},decls:25,vars:2,consts:[["data-bs-toggle","modal","data-bs-target","#newCalendarModal",3,"hidden"],["buttonElementReference",""],["id","newCalendarModal","tabindex","-1","aria-labelledby","newCalendarModalLabel","aria-hidden","true",1,"modal","fade","form-modal"],[1,"modal-dialog"],[1,"modal-content"],[1,"page-form",3,"formGroup","ngSubmit"],[1,"modal-header","bg-light"],["id","newCalendarModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[1,"row","mb-1"],[1,"col-md-4"],[1,"float-end","mt-1"],[1,"col-md-8"],["formControlName","calendarName",1,"form-control","form-control-sm","w-100"],[1,"modal-footer"],["type","submit","data-bs-dismiss","modal",1,"btn","btn-sm","btn-secondary","modal-form-btn"],["type","button","data-bs-dismiss","modal",1,"btn","btn-sm","btn-secondary","modal-form-btn"],["connectionToastComponentReference",""]],template:function(t,n){1&t&&(e.\u0275\u0275elementStart(0,"button",0,1),e.\u0275\u0275text(2," Launch demo modal\n"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",2),e.\u0275\u0275elementStart(4,"div",3),e.\u0275\u0275elementStart(5,"div",4),e.\u0275\u0275elementStart(6,"form",5),e.\u0275\u0275listener("ngSubmit",function(){return n.postCalendar()}),e.\u0275\u0275elementStart(7,"div",6),e.\u0275\u0275elementStart(8,"span",7),e.\u0275\u0275text(9,"Add New Calendar"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(10,"button",8),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"div",9),e.\u0275\u0275elementStart(12,"div",10),e.\u0275\u0275elementStart(13,"div",11),e.\u0275\u0275elementStart(14,"label",12),e.\u0275\u0275text(15,"Calendar Name :"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(16,"div",13),e.\u0275\u0275element(17,"input",14),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(18,"div",15),e.\u0275\u0275elementStart(19,"button",16),e.\u0275\u0275text(20,"Save"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(21,"button",17),e.\u0275\u0275text(22,"Cancel"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(23,"app-connection-toast",null,18)),2&t&&(e.\u0275\u0275property("hidden",!0),e.\u0275\u0275advance(6),e.\u0275\u0275property("formGroup",n.calendarForm))},directives:[s._Y,s.JL,s.sg,s.Fj,s.JJ,s.u,d.Y],styles:[""]}),a})();var S=i(3203),c=i(4289),Q=i(490);let y=(()=>{class a{constructor(t,n){this.pdfPrint=t,this.calendarApi=n,this.calendarGridData=[],this.schedulesGridData=[]}getPrintCalendars(t){this.calendarApi.getCalendars(1,t,"").subscribe(n=>{console.log(n),this.calendarGridData=n.results,this.printAllCalendars()},n=>{console.log(n)})}printAllCalendars(){let t=this.calendarGridData.map(function(r){return{calendar_name:r.calendar_name,created_at:new Date(r.created_at).toISOString().slice(0,16)}});var n=[["Calendar Name","Created At"]];t.forEach(r=>{var h=[];for(let f in r)h.push(r[f]);n.push(h)}),this.pdfPrint.openPdf([{layout:"lightHorizontalLines",table:{headerRows:1,widths:["65%","35%"],body:n}}])}getPrintSchedules(t){this.calendarApi.getAllSchedules(1,t,"").subscribe(n=>{console.log(n),this.schedulesGridData=n.results,this.printAllSchedules()},n=>{console.log(n)})}printAllSchedules(){let t=this.schedulesGridData.map(function(r){return{schedule_name:r.schedule_name,start_date:new Date(r.start_date).toISOString().slice(0,16),end_date:new Date(r.end_date).toISOString().slice(0,16),status:r.status}});var n=[["Schedule Name","Start Date","End Date","Status"]];t.forEach(r=>{var h=[];for(let f in r)h.push(r[f]);n.push(h)}),this.pdfPrint.openPdf([{layout:"lightHorizontalLines",table:{headerRows:1,widths:["35%","23%","23%","19%"],body:n}}])}}return a.\u0275fac=function(t){return new(t||a)(e.\u0275\u0275inject(Q.n),e.\u0275\u0275inject(u.q))},a.\u0275prov=e.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();const N=["connectionToastComponentReference"],L=["newCalendarComponentReference"],x=["tablePaginationComponentReference"],G=["calendarNameSortingComponentReference"],M=["createdAtSortingComponentReference"];function j(a,o){if(1&a){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"tr",20),e.\u0275\u0275listener("dblclick",function(){const r=e.\u0275\u0275restoreView(t).$implicit;return e.\u0275\u0275nextContext().viewCalendar(r.id)}),e.\u0275\u0275elementStart(1,"td"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"td"),e.\u0275\u0275text(4),e.\u0275\u0275pipe(5,"date"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()}if(2&a){const t=o.$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(null==t?null:t.calendar_name),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(5,2,null==t?null:t.created_at))}}const O=["connectionToastComponentReference"],H=["tablePaginationComponentReference"],B=["scheduleNameSortingComponentReference"],Y=["startDateSortingComponentReference"],z=["endDateSortingComponentReference"],J=["statusSortingComponentReference"];function U(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"tr"),e.\u0275\u0275elementStart(1,"td"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"td"),e.\u0275\u0275text(4),e.\u0275\u0275pipe(5,"date"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"td"),e.\u0275\u0275text(7),e.\u0275\u0275pipe(8,"date"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"td"),e.\u0275\u0275text(10),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()),2&a){const t=o.$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(null==t?null:t.schedule_name),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(5,4,null==t?null:t.start_date)),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(8,6,null==t?null:t.end_date)),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(null==t?null:t.status)}}const q=[{path:"",component:P,children:[{path:"",component:_},{path:"dashboard",component:_},{path:"all-calendars",component:(()=>{class a{constructor(t,n,l){this.router=t,this.calendarApi=n,this.calendarPrint=l,this.navHeading=[{text:"All Calendars",url:"/home/calendar/all-calendars"}],this.calendarGridData=[],this.currentPage=0,this.totalPages=0,this.totalItems=0}ngOnInit(){}ngAfterViewInit(){this.getCalendars(1,20,"")}getCalendars(t,n,l){this.calendarApi.getCalendars(t,n,l).subscribe(r=>{console.log(r),this.calendarGridData=r.results,this.currentPage=r.current_page,this.totalPages=r.total_pages,this.totalItems=r.count},r=>{this.connectionToast.openToast(),console.log(r)})}viewCalendar(t){console.log(t),sessionStorage.setItem("personal_calendar_id",t),this.router.navigateByUrl("/home/calendar/view-calendar")}sortTable(t){console.log(t),this.getCalendars(1,20,t),"calendar_name"==t||"-calendar_name"==t?this.createdAtSorting.resetSort():("created_at"==t||"-created_at"==t)&&this.calendarNameSorting.resetSort()}onPrint(){console.log("lets start printing..."),this.calendarPrint.getPrintCalendars(this.totalItems)}}return a.\u0275fac=function(t){return new(t||a)(e.\u0275\u0275directiveInject(m.F0),e.\u0275\u0275directiveInject(u.q),e.\u0275\u0275directiveInject(y))},a.\u0275cmp=e.\u0275\u0275defineComponent({type:a,selectors:[["app-all-calendars"]],viewQuery:function(t,n){if(1&t&&(e.\u0275\u0275viewQuery(N,5,d.Y),e.\u0275\u0275viewQuery(L,5,C),e.\u0275\u0275viewQuery(x,5,S.Q),e.\u0275\u0275viewQuery(G,5,c.m),e.\u0275\u0275viewQuery(M,5,c.m)),2&t){let l;e.\u0275\u0275queryRefresh(l=e.\u0275\u0275loadQuery())&&(n.connectionToast=l.first),e.\u0275\u0275queryRefresh(l=e.\u0275\u0275loadQuery())&&(n.newCalendar=l.first),e.\u0275\u0275queryRefresh(l=e.\u0275\u0275loadQuery())&&(n.tablePagination=l.first),e.\u0275\u0275queryRefresh(l=e.\u0275\u0275loadQuery())&&(n.calendarNameSorting=l.first),e.\u0275\u0275queryRefresh(l=e.\u0275\u0275loadQuery())&&(n.createdAtSorting=l.first)}},decls:30,vars:7,consts:[[3,"headings","showPrint","print"],[1,"container"],[1,"row","mb-3"],[1,"col-md-12"],[1,"btn","btn-secondary","page-add-btn",3,"click"],[1,"row"],[1,"col-md-7"],[1,"table","table-bordered","table-sm","w-100","page-table"],[1,"bg-light"],["width","65%"],[3,"sortField","sortDirection"],["calendarNameSortingComponentReference",""],["width","35%"],["createdAtSortingComponentReference",""],["class","table-pointer",3,"dblclick",4,"ngFor","ngForOf"],["colspan","2"],[3,"currentPage","totalPages","pageSelected"],["tablePaginationComponentReference",""],["newCalendarComponentReference",""],["connectionToastComponentReference",""],[1,"table-pointer",3,"dblclick"]],template:function(t,n){1&t&&(e.\u0275\u0275elementStart(0,"app-module-topnav",0),e.\u0275\u0275listener("print",function(){return n.onPrint()}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(1,"div",1),e.\u0275\u0275elementStart(2,"div",2),e.\u0275\u0275elementStart(3,"div",3),e.\u0275\u0275elementStart(4,"button",4),e.\u0275\u0275listener("click",function(){return n.newCalendar.openModal()}),e.\u0275\u0275text(5,"New Calendar"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"div",5),e.\u0275\u0275elementStart(7,"div",6),e.\u0275\u0275elementStart(8,"table",7),e.\u0275\u0275elementStart(9,"thead"),e.\u0275\u0275elementStart(10,"tr",8),e.\u0275\u0275elementStart(11,"th",9),e.\u0275\u0275text(12," Calendar Name "),e.\u0275\u0275elementStart(13,"app-table-sorting",10,11),e.\u0275\u0275listener("sortDirection",function(r){return n.sortTable(r)}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(15,"th",12),e.\u0275\u0275text(16," Created At "),e.\u0275\u0275elementStart(17,"app-table-sorting",10,13),e.\u0275\u0275listener("sortDirection",function(r){return n.sortTable(r)}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(19,"tbody"),e.\u0275\u0275template(20,j,6,4,"tr",14),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(21,"tfoot"),e.\u0275\u0275elementStart(22,"tr",8),e.\u0275\u0275elementStart(23,"td",15),e.\u0275\u0275elementStart(24,"app-table-pagination",16,17),e.\u0275\u0275listener("pageSelected",function(r){return n.getCalendars(r,20,"")}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(26,"app-new-calendar",null,18),e.\u0275\u0275element(28,"app-connection-toast",null,19)),2&t&&(e.\u0275\u0275property("headings",n.navHeading)("showPrint",!0),e.\u0275\u0275advance(13),e.\u0275\u0275property("sortField","calendar_name"),e.\u0275\u0275advance(4),e.\u0275\u0275property("sortField","created_at"),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngForOf",n.calendarGridData),e.\u0275\u0275advance(4),e.\u0275\u0275property("currentPage",n.currentPage)("totalPages",n.totalPages))},directives:[g.H,c.m,p.sg,S.Q,C,d.Y],pipes:[p.uU],styles:[""]}),a})()},{path:"new-calendar",component:C},{path:"view-calendar",component:T,canActivate:[(()=>{class a{constructor(t){this.router=t}canActivate(t){return!!sessionStorage.getItem("personal_calendar_id")||(this.router.navigateByUrl("/home/calendar"),!1)}}return a.\u0275fac=function(t){return new(t||a)(e.\u0275\u0275inject(m.F0))},a.\u0275prov=e.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac,providedIn:"root"}),a})()]},{path:"all-schedules",component:(()=>{class a{constructor(t,n){this.calendarApi=t,this.calendarPrint=n,this.navHeading=[{text:"All Schedules",url:"/home/calendar/all-schedules"}],this.schedulesGridData=[],this.currentPage=0,this.totalPages=0,this.totalItems=0}ngOnInit(){}ngAfterViewInit(){this.getAllSchedules(1,20,"")}getAllSchedules(t,n,l){this.calendarApi.getAllSchedules(t,n,l).subscribe(r=>{console.log(r),this.schedulesGridData=r.results,this.currentPage=r.current_page,this.totalPages=r.total_pages,this.totalItems=r.count},r=>{this.connectionToast.openToast(),console.log(r)})}sortTable(t){console.log(t),this.getAllSchedules(1,20,t),"schedule_name"==t||"-schedule_name"==t?(this.startDateSorting.resetSort(),this.endDateSorting.resetSort(),this.statusSorting.resetSort()):"start_date"==t||"-start_date"==t?(this.scheduleNameSorting.resetSort(),this.endDateSorting.resetSort(),this.statusSorting.resetSort()):"end_date"==t||"-end_date"==t?(this.scheduleNameSorting.resetSort(),this.startDateSorting.resetSort(),this.statusSorting.resetSort()):("status"==t||"-status"==t)&&(this.scheduleNameSorting.resetSort(),this.startDateSorting.resetSort(),this.endDateSorting.resetSort())}onPrint(){console.log("lets start printing..."),this.calendarPrint.getPrintSchedules(this.totalItems)}}return a.\u0275fac=function(t){return new(t||a)(e.\u0275\u0275directiveInject(u.q),e.\u0275\u0275directiveInject(y))},a.\u0275cmp=e.\u0275\u0275defineComponent({type:a,selectors:[["app-all-schedules"]],viewQuery:function(t,n){if(1&t&&(e.\u0275\u0275viewQuery(O,5,d.Y),e.\u0275\u0275viewQuery(H,5,S.Q),e.\u0275\u0275viewQuery(B,5,c.m),e.\u0275\u0275viewQuery(Y,5,c.m),e.\u0275\u0275viewQuery(z,5,c.m),e.\u0275\u0275viewQuery(J,5,c.m)),2&t){let l;e.\u0275\u0275queryRefresh(l=e.\u0275\u0275loadQuery())&&(n.connectionToast=l.first),e.\u0275\u0275queryRefresh(l=e.\u0275\u0275loadQuery())&&(n.tablePagination=l.first),e.\u0275\u0275queryRefresh(l=e.\u0275\u0275loadQuery())&&(n.scheduleNameSorting=l.first),e.\u0275\u0275queryRefresh(l=e.\u0275\u0275loadQuery())&&(n.startDateSorting=l.first),e.\u0275\u0275queryRefresh(l=e.\u0275\u0275loadQuery())&&(n.endDateSorting=l.first),e.\u0275\u0275queryRefresh(l=e.\u0275\u0275loadQuery())&&(n.statusSorting=l.first)}},decls:30,vars:9,consts:[[3,"headings","showPrint","print"],[1,"container"],[1,"row"],[1,"col-md-9"],[1,"table","table-bordered","table-sm","w-100","page-table"],[1,"bg-light"],["width","35%"],[3,"sortField","sortDirection"],["scheduleNameSortingComponentReference",""],["width","23%"],["startDateSortingComponentReference",""],["endDateSortingComponentReference",""],["width","19%"],["statusSortingComponentReference",""],[4,"ngFor","ngForOf"],["colspan","4"],[3,"currentPage","totalPages","pageSelected"],["tablePaginationComponentReference",""]],template:function(t,n){1&t&&(e.\u0275\u0275elementStart(0,"app-module-topnav",0),e.\u0275\u0275listener("print",function(){return n.onPrint()}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(1,"div",1),e.\u0275\u0275elementStart(2,"div",2),e.\u0275\u0275elementStart(3,"div",3),e.\u0275\u0275elementStart(4,"table",4),e.\u0275\u0275elementStart(5,"thead"),e.\u0275\u0275elementStart(6,"tr",5),e.\u0275\u0275elementStart(7,"th",6),e.\u0275\u0275text(8," Schedule "),e.\u0275\u0275elementStart(9,"app-table-sorting",7,8),e.\u0275\u0275listener("sortDirection",function(r){return n.sortTable(r)}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"th",9),e.\u0275\u0275text(12," Start Date "),e.\u0275\u0275elementStart(13,"app-table-sorting",7,10),e.\u0275\u0275listener("sortDirection",function(r){return n.sortTable(r)}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(15,"th",9),e.\u0275\u0275text(16," End Date "),e.\u0275\u0275elementStart(17,"app-table-sorting",7,11),e.\u0275\u0275listener("sortDirection",function(r){return n.sortTable(r)}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(19,"th",12),e.\u0275\u0275text(20," Status "),e.\u0275\u0275elementStart(21,"app-table-sorting",7,13),e.\u0275\u0275listener("sortDirection",function(r){return n.sortTable(r)}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(23,"tbody"),e.\u0275\u0275template(24,U,11,8,"tr",14),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(25,"tfoot"),e.\u0275\u0275elementStart(26,"tr",5),e.\u0275\u0275elementStart(27,"td",15),e.\u0275\u0275elementStart(28,"app-table-pagination",16,17),e.\u0275\u0275listener("pageSelected",function(r){return n.getAllSchedules(r,20,"")}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()),2&t&&(e.\u0275\u0275property("headings",n.navHeading)("showPrint",!0),e.\u0275\u0275advance(9),e.\u0275\u0275property("sortField","schedule_name"),e.\u0275\u0275advance(4),e.\u0275\u0275property("sortField","start_date"),e.\u0275\u0275advance(4),e.\u0275\u0275property("sortField","endDate"),e.\u0275\u0275advance(4),e.\u0275\u0275property("sortField","status"),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngForOf",n.schedulesGridData),e.\u0275\u0275advance(4),e.\u0275\u0275property("currentPage",n.currentPage)("totalPages",n.totalPages))},directives:[g.H,c.m,p.sg,S.Q],pipes:[p.uU],styles:[""]}),a})()}]}];let k=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.\u0275\u0275defineNgModule({type:a}),a.\u0275inj=e.\u0275\u0275defineInjector({imports:[[m.Bz.forChild(q)],m.Bz]}),a})();var $=i(6305),w=i(2743);let X=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.\u0275\u0275defineNgModule({type:a}),a.\u0275inj=e.\u0275\u0275defineInjector({imports:[[p.ez,m.Bz,s.u5,s.UX,b.m9,w.p]]}),a})(),Z=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.\u0275\u0275defineNgModule({type:a}),a.\u0275inj=e.\u0275\u0275defineInjector({imports:[[p.ez,k,$.M,w.p,X]]}),a})()}}]);